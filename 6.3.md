@startuml

state Standby
state "Validar Tarjeta" as ValidarTarjeta
state "Validar PIN" as ValidarPIN
state "PIN Incorrecto" as PinIncorrecto
state Bloqueo
state "Seleccionar Transacción" as SeleccionarTransaccion
state "Ejecutar Transacción" as EjecutarTransaccion
state Finalizar

[*] --> Standby
Standby --> ValidarTarjeta : Insertar tarjeta
ValidarTarjeta --> Standby : Tarjeta inválida
ValidarTarjeta --> ValidarPIN : Tarjeta válida

ValidarPIN --> PinIncorrecto : PIN incorrecto
PinIncorrecto --> ValidarPIN : Reintentar (máx 3 veces)
PinIncorrecto --> Bloqueo : 3 intentos fallidos

ValidarPIN --> SeleccionarTransaccion : PIN correcto
SeleccionarTransaccion --> EjecutarTransaccion : Elegir transacción
EjecutarTransaccion --> SeleccionarTransaccion : Transacción completada

SeleccionarTransaccion --> Finalizar : Finalizar sesión
EjecutarTransaccion --> Finalizar : Finalizar sesión tras transacción

@enduml
